# ─────────────────────────────────────────────────────────────────────
# Astrobot v2 Configuration
#
# RECOMMENDED: Use ./scripts/deploy.sh for first-time setup.
# It creates 1Password items, stores secrets, and generates this file
# with op:// references that are resolved at runtime.
#
# If configuring manually, copy this to .env and fill in values.
# Secrets should use op:// references (recommended) or plaintext.
#
# Start services with: op run --env-file=.env -- docker compose up -d
# ─────────────────────────────────────────────────────────────────────

# ── 1Password Vault ─────────────────────────────────────────────────

OP_VAULT=Astrobot

# ── Secrets (op:// references resolved at runtime by 'op run') ──────
#
# Format: op://<vault>/<item>/<field>
# These are resolved in-memory by 'op run' — no plaintext on disk.
#
# If you prefer not to use 1Password, replace with raw values and
# start services with: docker compose up -d (no 'op run' wrapper).

# Telegram Bot Token (from @BotFather: https://t.me/BotFather)
TELEGRAM_BOT_TOKEN=op://Astrobot/Telegram Bot/token

# OpenRouter API Key (from https://openrouter.ai/keys)
OPENROUTER_API_KEY=op://Astrobot/OpenRouter/api key

# PostgreSQL password (DATABASE_URL is constructed in docker-compose.yml)
POSTGRES_PASSWORD=op://Astrobot/PostgreSQL/password

# ── Telegram Chat Security ────────────────────────────────────────
#
# Owner chat ID — restricts bot access to this Telegram user.
# Leave empty to auto-register the first person who messages the bot.
# Once set (manually or via auto-registration), only this user can talk to the bot.
TELEGRAM_OWNER_CHAT_ID=

# ── Bot Configuration ──────────────────────────────────────────────

# Assistant display name
ASSISTANT_NAME=Nano

# Orchestrator model (OpenRouter model ID)
ORCHESTRATOR_MODEL=anthropic/claude-sonnet-4-20250514

# Default model for new specialist agents (overridable per-agent)
DEFAULT_AGENT_MODEL=anthropic/claude-sonnet-4-20250514

# Embedding model for vector memory
EMBEDDING_MODEL=openai/text-embedding-3-small

# ── Container Settings ─────────────────────────────────────────────

# Docker image for agent containers
CONTAINER_IMAGE=astrobot-agent:latest

# Orchestrator container TTL in ms (default: 8 hours)
ORCHESTRATOR_TTL=28800000

# Idle timeout in ms (default: 30 minutes)
IDLE_TIMEOUT=1800000

# Max concurrent agent containers
MAX_CONCURRENT_CONTAINERS=5

# ── Logging ────────────────────────────────────────────────────────

# trace, debug, info, warn, error, fatal
LOG_LEVEL=info
