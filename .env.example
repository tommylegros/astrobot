# ─────────────────────────────────────────────────────────────────────
# Astrobot v2 Configuration
#
# RECOMMENDED: Use ./scripts/deploy.sh for first-time setup.
# It creates 1Password items, stores secrets, and generates this file
# with op:// references that are resolved at runtime.
#
# If configuring manually, copy this to .env and fill in values.
# Secrets should use op:// references (recommended) or plaintext.
#
# Start services with: op run --env-file=.env -- docker compose up -d
# ─────────────────────────────────────────────────────────────────────

# ── 1Password Vault ─────────────────────────────────────────────────

OP_VAULT=Astrobot

# ── Secrets (op:// references resolved at runtime by 'op run') ──────
#
# Format: op://<vault>/<item>/<field>
# These are resolved in-memory by 'op run' — no plaintext on disk.
#
# If you prefer not to use 1Password, replace with raw values and
# start services with: docker compose up -d (no 'op run' wrapper).

# Telegram Bot Token (from @BotFather: https://t.me/BotFather)
TELEGRAM_BOT_TOKEN=op://Astrobot/Telegram Bot/token

# OpenRouter API Key (from https://openrouter.ai/keys)
OPENROUTER_API_KEY=op://Astrobot/OpenRouter/api key

# PostgreSQL password (DATABASE_URL is constructed in docker-compose.yml)
POSTGRES_PASSWORD=op://Astrobot/PostgreSQL/password

# ── Telegram Chat Security ────────────────────────────────────────
#
# Owner chat ID — restricts bot access to this Telegram user.
# Leave empty to auto-register the first person who messages the bot.
# Once set (manually or via auto-registration), only this user can talk to the bot.
TELEGRAM_OWNER_CHAT_ID=

# ── Bot Configuration ──────────────────────────────────────────────

# Assistant display name
ASSISTANT_NAME=Nano

# Orchestrator model (OpenRouter model ID)
ORCHESTRATOR_MODEL=anthropic/claude-sonnet-4-20250514

# Default model for new specialist agents (overridable per-agent)
DEFAULT_AGENT_MODEL=anthropic/claude-sonnet-4-20250514

# Embedding model for vector memory
EMBEDDING_MODEL=openai/text-embedding-3-small

# ── Container Settings ─────────────────────────────────────────────

# Docker image for agent containers
CONTAINER_IMAGE=astrobot-agent:latest

# Orchestrator container TTL in ms (default: 8 hours)
ORCHESTRATOR_TTL=28800000

# Idle timeout in ms (default: 30 minutes)
IDLE_TIMEOUT=1800000

# Max concurrent agent containers
MAX_CONCURRENT_CONTAINERS=5

# ── MCP Server Secrets ─────────────────────────────────────────────
#
# API keys and tokens used by MCP servers running inside agent containers.
# Values are resolved from env vars at container launch via ${VAR_NAME} syntax.
# Use op:// references with `op run` or set plaintext values.

# Slack MCP Server (https://github.com/zencoderai/slack-mcp-server)
# Bot token from your Slack app's OAuth & Permissions page (xoxb-...)
SLACK_BOT_TOKEN=op://Astrobot/Slack Bot/token
# Team/workspace ID (starts with T...)
SLACK_TEAM_ID=op://Astrobot/Slack Bot/team id
# Optional: comma-separated channel IDs to expose to the bot
SLACK_CHANNEL_IDS=

# Todoist MCP Server (https://github.com/stanislavlysenko0912/todoist-mcp-server)
# API token from Todoist Settings → Integrations → Developer
TODOIST_API_KEY=op://Astrobot/Todoist/api key

# Brave Search MCP Server (https://github.com/brave/brave-search-mcp-server)
# API key from https://brave.com/search/api/
BRAVE_API_KEY=op://Astrobot/Brave Search/api key

# Google Workspace MCP Server (https://github.com/taylorwilsdon/google_workspace_mcp)
# OAuth 2.0 credentials from Google Cloud Console → APIs & Services → Credentials
# IMPORTANT: Requires one-time OAuth browser flow. See README for setup instructions.
GOOGLE_OAUTH_CLIENT_ID=op://Astrobot/Google Workspace/client id
GOOGLE_OAUTH_CLIENT_SECRET=op://Astrobot/Google Workspace/client secret

# App Store Connect MCP Server (https://github.com/JoshuaRileyDev/app-store-connect-mcp-server)
# Generate an API key at App Store Connect → Users and Access → Integrations → Keys
APP_STORE_CONNECT_KEY_ID=op://Astrobot/App Store Connect/key id
APP_STORE_CONNECT_ISSUER_ID=op://Astrobot/App Store Connect/issuer id
# .p8 private key contents (the full PEM string from your AuthKey_XXXXXXXXXX.p8 file)
APP_STORE_CONNECT_P8_KEY=op://Astrobot/App Store Connect/private key
# Optional: vendor number for sales & finance reports (found in Sales and Trends)
APP_STORE_CONNECT_VENDOR_NUMBER=

# Financial Modeling Prep MCP Server (https://github.com/cdtait/fmp-mcp-server)
# API key from https://site.financialmodelingprep.com/register
FMP_API_KEY=op://Astrobot/Financial Modeling Prep/api key

# Playwright MCP Server (https://github.com/microsoft/playwright-mcp)
# No API key needed — uses Chromium pre-installed in agent containers.

# ── Logging ────────────────────────────────────────────────────────

# trace, debug, info, warn, error, fatal
LOG_LEVEL=info
